(function(){"use strict";var t={34843:function(t,e,r){var n=r(20144),o=r(40998),a=r(16232),i=r(55550),s=r(8323),u=r(29592),c=r(13687),l=r(97953),d=function(){var t=this,e=t._self._c;return e(o.Z,{attrs:{id:"inspire"}},[e("navigation-menu"),e(a.Z,{attrs:{app:"",color:"darkblue",dark:""}},[e(i.Z,{on:{click:function(e){return e.stopPropagation(),t.toggleDrawer()}}}),e(l.qW,[t._v(t._s(t.$store.state.title))]),e(u.Z,{attrs:{active:t.$store.state.loading,absolute:"",bottom:"",indeterminate:"",color:"amber"}}),e(c.Z),e("div",{staticClass:"radioTitle"},[t._v(" "+t._s(t.getRadioTitle())+" ")]),e("start-stop-control")],1),null!=t.$store.state.esp32?e(s.Z,[e("router-view")],1):t._e()],1)},p=[],m=r(4324),f=r(65495),h=r(65808),g=r(54525),v=r(45187),y=r(45200),b=r(17477),w=function(){var t=this,e=t._self._c;return e(b.Z,{attrs:{"clipped-left":"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(h.Z,{attrs:{dense:""}},[e(g.Z,{attrs:{to:"/genres"}},[e(v.Z,[e(m.Z,[t._v("apps")])],1),e(y.km,[e(y.V9,[t._v("Radios by Genre")])],1)],1),e(g.Z,{attrs:{to:"/countries"}},[e(v.Z,[e(m.Z,[t._v("map")])],1),e(y.km,[e(y.V9,[t._v("Radios by Country")])],1)],1),null!=t.$store.state.homeCountry?e(g.Z,{attrs:{to:t.$store.state.homeCountry.homeCountryPath}},[e(v.Z,[e(f.Z,{attrs:{width:"8",src:t.$store.state.homeCountry.iconUrl}})],1),e(y.km,[e(y.V9,[t._v("Radios in "+t._s(t.$store.state.homeCountry.homeCountryName))])],1)],1):t._e(),t.$store.state.esp32?e(g.Z,{attrs:{to:"/setup"}},[e(v.Z,[e(m.Z,[t._v("settings")])],1),e(y.km,[e(y.V9,[t._v("Setup")])],1)],1):t._e(),e(g.Z,{attrs:{to:"/about"}},[e(v.Z,[e(m.Z,[t._v("info")])],1),e(y.km,[e(y.V9,[t._v("About")])],1)],1)],1)],1)},P=[],Z={computed:{drawer:{get:function(){return this.$store.state.drawer},set:function(t){this.$store.commit("setDrawer",t)}}}},_=Z,C=r(1001),k=(0,C.Z)(_,w,P,!1,null,null,null),$=k.exports,S=r(64562),R=r(1786),j=function(){var t=this,e=t._self._c;return e("div",[null==t.$store.state.activeRadio.url||t.$store.state.activeRadio.error?t._e():e(S.Z,{attrs:{fab:"",small:"",color:t.active?"red":"green",dark:""},on:{click:function(e){t.active=!t.active}}},[t.active?t._e():e(m.Z,[t._v("play_arrow")]),t.active?e(m.Z,[t._v("stop")]):t._e()],1),t.$store.state.activeRadio.error?e(R.Z,{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:r}){return[e(m.Z,t._g({attrs:{color:"red"}},r),[t._v(" block ")])]}}],null,!1,4099701519)},[e("span",[t._v("The Stream is temporarily not available")])]):t._e()],1)},E=[],L={data:()=>({show:!1}),computed:{active:{get:function(){return this.$store.state.activeRadio.active},set:function(t){var e=this.$store.state.activeRadio;e.active=t,t?this.$store.state.musicPlayer.play(this.$store.state.activeRadio.url):(this.$store.state.musicPlayer.stop(),this.$store.commit("setActiveRadio",e))}}}},T=L,A=(0,C.Z)(T,j,E,!1,null,null,null),O=A.exports,N={props:{source:String},methods:{toggleDrawer(){var t=!this.$store.state.drawer;this.$store.commit("setDrawer",t)},getRadioTitle(){var t=this.$store.state.activeRadio.name;return t.length>50&&(t=t.substring(0,50)+"..."),t}},created(){this.$store.dispatch("setupTitle"),this.$store.dispatch("setupBlacklist"),this.$store.dispatch("setupHomeCountry"),this.$store.commit("setMusicPlayer",0)},components:{"navigation-menu":$,"start-stop-control":O}},B=N,x=(0,C.Z)(B,d,p,!1,null,null,null),G=x.exports,M=r(78345);n.ZP.use(M.ZP);const D=[{path:"/",name:"Genres",component:()=>r.e(313).then(r.bind(r,1313))},{path:"/genres",name:"Genres",component:()=>r.e(313).then(r.bind(r,1313))},{path:"/genres/:id",name:"Genre",component:()=>r.e(548).then(r.bind(r,84371)),props:!0},{path:"/countries",name:"Countries",component:()=>r.e(764).then(r.bind(r,37764))},{path:"/countries/:id",name:"Country",component:()=>r.e(548).then(r.bind(r,84371)),props:!0},{path:"/home/:id",name:"Radios",component:()=>r.e(548).then(r.bind(r,84371)),props:!0},{path:"/about",name:"About",component:()=>r.e(540).then(r.bind(r,14540))},{path:"/setup",name:"Setup",component:()=>r.e(917).then(r.bind(r,25917))}],I=new M.ZP({routes:D});var U=I,F=r(20629),H=r(77094);class V{constructor(){V.isPlaying=!1,this.service=new H.Z}getName(){return"Streaming on ESP32"}async play(t){V.isPlaying=!0;var e=await this.service.postStreaming(V.isPlaying,t);return 200==e.status?{url:t,playing:!0}:{url:t,playing:!1}}async stop(){return V.isPlaying=!1,await this.service.postStreaming(V.isPlaying,"")}async getInfo(){return await this.service.getRadioInfo()}isPlaying(){return V.isPlaying}}class q{constructor(){void 0===q.isPlaying&&(q.audio=null,q.isPlaying=!1,this.service=new H.Z)}getName(){return"Playing locally"}async play(t){await this.stop();try{var e=await this.setup();return e?(q.audio=new Audio(t),await q.audio.play(),q.isPlaying=!0,console.info("MusicPlayer -> OK"),{url:t,playing:!0}):{url:t,playing:!1}}catch(r){return console.error(r),{url:t,playing:!1}}}async setup(){if(K.state.esp32){var t=await this.service.postBluetooth(!0);return t.data.bluetooth}return!0}async stop(){if(null!=q.audio){try{q.audio.pause()}catch(t){console.log.error(t)}q.audio=null}q.isPlaying=!1}async getInfo(){return{isPlaying:q.isPlaying}}isPlaying(){return q.isPlaying}}n.ZP.use(F.ZP);var K=new F.ZP.Store({state:{loading:!0,countries:[],genres:[],homeCountry:null,title:"Radio Player",esp32:null,publicPath:"/esp32_radio/vue-radio/dist/",drawer:null,activeRadio:{id:null,active:!1,url:null,error:!1,name:""},radios:{},musicPlayer:null,supportedMusicPlayers:[new q,new V],blacklist:[],resourceAddress:"https://pschatzmann.github.io"},mutations:{setDrawer(t,e){t.drawer=e},setCountries(t,e){t.countries=e},setGenres(t,e){t.genres=e},setHome(t,e){t.homeCountry=e},setActiveRadio(t,e){t.activeRadio=e},setRadios(t,e){t.radios[e.id]=e.value},setESP32(t,e){e?(t.title="ESP32 Radio Player",t.esp32=!0,t.publicPath=t.resourceAddress+"/esp32_radio/vue-radio/dist/"):t.esp32=!1},setMusicPlayer(t,e){t.musicPlayer&&t.musicPlayer.stop(),t.musicPlayer=t.supportedMusicPlayers[e]},setBlacklist(t,e){t.blacklist=e},setLoading(t,e){t.loading=e}},actions:{setupGenres(t){if(0==t.state.genres.length){t.commit("setLoading",!0);const e=t.state.publicPath,r=new H.Z;r.getGenres(e).then((r=>{r.data.forEach((t=>{t.imageUrl=e+t.imageUrl})),t.commit("setGenres",r.data),t.commit("setLoading",!1)}),(e=>{console.error(e),t.commit("setLoading",!1)}))}},setupCountries(t){if(0==t.state.countries.length){t.commit("setLoading",!0);const e=new H.Z,r=t.state.publicPath;e.getCountry(r).then((n=>{var o={};for(var a of n.data)o[a["alpha-2"].toLowerCase()]=a.name;e.getCountryCodes().then((e=>{var n=e.data;for(var a of n)a.iconUrl=r+"flags/"+a.name.toLowerCase()+".png",a.countryCode=a.name,a.counrtyName=o[a.name.toLowerCase()];t.commit("setCountries",n),t.commit("setLoading",!1)})).catch((e=>{console.error(e),t.commit("setLoading",!1)}))})).catch((e=>{console.error(e),t.commit("setLoading",!1)}))}},setupHomeCountry(t){if(null==t.state.homeCountry){const e=new H.Z;e.getUserCountry().then((e=>{var r={};const n=t.state.publicPath,o=e.data.country_code.toLowerCase();r.homeCountryName=e.data.country_name,r.homeCountryPath="/home/"+o,r.iconUrl=n+"flags/"+o+".png",t.commit("setHome",r)})).catch((t=>{console.error(t)}))}},setupTitle(t){const e=new H.Z;e.getInfo().then((e=>{t.commit("setESP32",!0),console.log(e)}),(e=>{t.commit("setESP32",!1),console.log(e)}))},setupBlacklist(t){const e=t.state.publicPath,r=new H.Z;r.getBlacklist(e).then((e=>{t.commit("setBlacklist",e.data)}),(t=>{console.error(t)}))}},modules:{}}),z=(r(76124),r(38864));n.ZP.use(z.Z);var W=new z.Z({icons:{iconfont:"md"},theme:{dark:!0}});n.ZP.config.productionTip=!1,new n.ZP({router:U,store:K,vuetify:W,render:t=>t(G)}).$mount("#app")},77094:function(t,e,r){r.d(e,{Z:function(){return a}});var n=r(9669),o=r.n(n);class a{async getGenres(t){return console.log("getGenres"),await o().get(t+"data/genres.json")}async getCountry(t){return await o().get(t+"data/countries.json")}async getBlacklist(t){return await o().get(t+"data/blacklist.json")}async getCountryCodes(){return await o().get("https://de1.api.radio-browser.info/json/countrycodes?hidebroken=true")}async getRadios(t,e){var r="https://de1.api.radio-browser.info/json/stations/search?"+t+"="+e+"&codec=MP3";return await o().get(r)}async getUserCountry(){return await o().get("https://api.ipdata.co/?api-key=62f04882eac5c1c2469a3dee1d5c98187ba19c0a189783d372e36122")}async getInfo(){return console.log("getInfo"),await o().get("/service/info")}async postBluetooth(t){var e=t?"start":"stop";return await o().post("/service/bluetooth/"+e)}async postStreaming(t,e){if(t){const t=new FormData;return t.set("url",e),await o().post("/service/streaming/start",t,{headers:{"Content-Type":"multipart/form-data"}})}return await o().post("/service/streaming/stop")}async getRadioInfo(){return await o().get("/service/status")}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.m=t,function(){var t=[];r.O=function(e,n,o,a){if(!n){var i=1/0;for(l=0;l<t.length;l++){n=t[l][0],o=t[l][1],a=t[l][2];for(var s=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[u])}))?n.splice(u--,1):(s=!1,a<i&&(i=a));if(s){t.splice(l--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,o,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,n){return r.f[n](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/"+t+"."+{313:"42257e3d",540:"6f3c5c2c",548:"1b090b2e",764:"b8ed6e65",917:"465f413c"}[t]+".js"}}(),function(){r.miniCssF=function(t){return"css/"+t+"."+{313:"e8df95a1",540:"70d22113",548:"79887f0d",764:"e8df95a1",917:"d40d8e4c"}[t]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="radio-player:";r.l=function(n,o,a,i){if(t[n])t[n].push(o);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",e+a),s.src=n),t[n]=[o];var p=function(e,r){s.onerror=s.onload=null,clearTimeout(m);var o=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(r)})),e)return e(r)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/esp32_radio/vue-radio/dist/"}(),function(){var t=function(t,e,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var a=function(a){if(o.onerror=o.onload=null,"load"===a.type)r();else{var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||e,u=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=i,u.request=s,o.parentNode.removeChild(o),n(u)}};return o.onerror=o.onload=a,o.href=e,document.head.appendChild(o),o},e=function(t,e){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=r[n],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===t||a===e))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],a=o.getAttribute("data-href");if(a===t||a===e)return o}},n=function(n){return new Promise((function(o,a){var i=r.miniCssF(n),s=r.p+i;if(e(i,s))return o();t(n,s,o,a)}))},o={143:0};r.f.miniCss=function(t,e){var r={313:1,540:1,548:1,764:1,917:1};o[t]?e.push(o[t]):0!==o[t]&&r[t]&&e.push(o[t]=n(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}(),function(){var t={143:0};r.f.j=function(e,n){var o=r.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=t[e]=[r,n]}));n.push(o[2]=a);var i=r.p+r.u(e),s=new Error,u=function(n){if(r.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};r.l(i,u,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],s=n[1],u=n[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(e&&e(n);c<i.length;c++)a=i[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(l)},n=self["webpackChunkradio_player"]=self["webpackChunkradio_player"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(34843)}));n=r.O(n)})();
//# sourceMappingURL=app.529d651d.js.map